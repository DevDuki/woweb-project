(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{27:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(16),r=n.n(a),i=n(12),s=n(15),o=n.n(s),d=n(17),u=n(8),l=n(37),h=n(28),j=n(1),b=function(e){var t=e.title,n=e.subtitle;return Object(j.jsxs)(h.a,{children:[Object(j.jsx)("h1",{children:t}),Object(j.jsx)("h3",{children:n})]})},p=n(29),f=n(30),m=n(31),O=n(32),x=n(33),v=n(34),g=n(35),y=function(e){var t=e.updateJourneyDetails,n=e.setDepartureLoc,c=e.setArrivalLoc,a=e.setDate;return Object(j.jsxs)(p.a,{onSubmit:function(e){e.preventDefault(),t()},children:[Object(j.jsxs)(f.a,{form:!0,children:[Object(j.jsx)(m.a,{md:6,children:Object(j.jsxs)(O.a,{children:[Object(j.jsx)(x.a,{for:"departureLoc",children:"Von"}),Object(j.jsx)(v.a,{onChange:function(e){return n(e.target.value)},type:"text",name:"departureLoc",id:"departureLoc",placeholder:"Abfahrtsort",required:!0})]})}),Object(j.jsx)(m.a,{md:6,children:Object(j.jsxs)(O.a,{children:[Object(j.jsx)(x.a,{for:"arrivalLoc",children:"Nach"}),Object(j.jsx)(v.a,{onChange:function(e){return c(e.target.value)},type:"text",name:"arrivalLoc",id:"arrivalLoc",placeholder:"Ankunftsort",required:!0})]})})]}),Object(j.jsx)(f.a,{form:!0,children:Object(j.jsx)(m.a,{md:3,children:Object(j.jsxs)(O.a,{children:[Object(j.jsx)(x.a,{for:"date",children:"Date"}),Object(j.jsx)(v.a,{onChange:function(e){return a(e.target.value)},type:"date",name:"date",id:"date",placeholder:"date placeholder",required:!0})]})})}),Object(j.jsx)(g.a,{color:"primary",children:"Route berechnen"})]})},S=n(36),w=function(e){var t=e.canton,n=e.municipality,c=e.incidence,a=e.highestIncidence,r=Math.ceil(c/a*100),i=r>=75?"#ff0101bd":r>=50?"orange":r>=25?"yellow":"#31dc31";return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t}),Object(j.jsx)("td",{children:n}),Object(j.jsx)("td",{style:{background:i},children:c})]})},N=function(e){var t=e.content,n=e.from,c=e.to,a=e.date,r=t.map((function(e){return e.incidences.incidence})),s=Math.max.apply(Math,Object(i.a)(r));return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{style:{marginTop:"2rem"},children:"Inzidenzentabelle"}),Object(j.jsx)("p",{children:a?"Von ".concat(n," nach ").concat(c," am ").concat(a.substr(8,2),".").concat(a.substr(5,2),".").concat(a.substr(0,4)):"Bitte w\xe4hlen Sie eine Route aus"}),Object(j.jsxs)(S.a,{children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Kanton"}),Object(j.jsx)("th",{children:"Gemeinde"}),Object(j.jsx)("th",{children:"Inzidenzwert"})]})}),Object(j.jsx)("tbody",{children:t.map((function(e,t){return Object(j.jsx)(w,{canton:e.canton,municipality:e.municipalityName,incidence:Math.floor(e.incidences.incidence),highestIncidence:s},t)}))})]})]})},L=new window.SearchChMap({from:"",to:"",routemode:"oev",controls:"all"}),k={ZH:"https://jagd.ddns.net/api",GR:"https://gr.corona-navigator.ch/v1",BS:"https://86.119.34.31",BL:"https://86.119.34.31",TG:"https://thurgau.entry-check.ch/api/v1",AG:"https://covid-navigator.ch/api",ZG:"http://86.119.34.76/kantonsservice-zug",BE:"https://bern.coronanavigator.ch",SO:"https://conav.dvob.ch/api/v1",LU:"https://86.119.34.70",SZ:"https://86.119.43.84/api",SG:"https://86.119.43.232:8888",FR:"https://service-devl.wodss12.cf"},G=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(u.a)(r,2),h=s[0],p=s[1],f=Object(c.useState)([]),m=Object(u.a)(f,2),O=m[0],x=m[1],v=Object(c.useState)(""),g=Object(u.a)(v,2),S=g[0],w=g[1],G=Object(c.useState)(!1),I=Object(u.a)(G,2),D=I[0],M=I[1],E=Object(c.useState)([]),C=Object(u.a)(E,2),T=C[0],z=C[1];Object(c.useEffect)((function(){var e=document.createElement("script");e.src="//map.search.ch/api/map.js?lang=de",e.async=!0,document.body.appendChild(e),L.addEventListener("change",Object(d.a)(o.a.mark((function e(){var t,n,c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!L.route){e.next=14;break}return"https://api3.geo.admin.ch/rest/services/api/MapServer/identify?","all:ch.swisstopo.swissboundaries3d-gemeinde-flaeche.fill",t=[],L.route.pois&&(t=Object.entries(L.route.pois).flat().filter((function(e){return e instanceof Object}))),t=t.concat(L.route.waypoints),e.next=8,fetch("".concat("https://api3.geo.admin.ch/rest/services/api/MapServer/identify?","sr=4326&geometry=").concat(JSON.stringify({paths:[t.map((function(e){return[e.lon,e.lat]}))]}),"&geometryType=esriGeometryPolyline&tolerance=0&returnGeometry=false&lang=de&layers=").concat("all:ch.swisstopo.swissboundaries3d-gemeinde-flaeche.fill"));case 8:return n=e.sent,e.next=11,n.json();case 11:c=e.sent,a=c.results.map((function(e){return{bfsNr:e.id,canton:e.attributes.kanton,municipalityName:e.attributes.gemname}})),x(a);case 14:case"end":return e.stop()}}),e)}))))}),[]),Object(c.useEffect)((function(){D&&(B(),M(!1))}),[O]);var A=O.map((function(e){if(k[e.canton]){var t="".concat(k[e.canton],"/municipalities/").concat(e.bfsNr),n="".concat(k[e.canton],"/incidences/").concat(e.bfsNr,"?dateFrom=").concat(S,"&dateTo=").concat(S);return{bfsNr:e.bfsNr,canton:e.canton,municipalityName:e.municipalityName,urlIncidences:n,urlMunicipality:t}}})).filter((function(e){return void 0!==e})),B=function(){var e=[];A.forEach((function(t){fetch(t.urlIncidences).then((function(e){return e.json()})).then((function(n){var c={canton:t.canton,municipalityName:t.municipalityName,incidences:n[0]};e=[].concat(Object(i.a)(e),[c])})).then((function(){z(e)})).catch((function(e){return console.error(e)}))}))};return Object(j.jsxs)(l.a,{children:[Object(j.jsx)(b,{title:"Corona Navigator",subtitle:"Tragen Sie Ihren Streckenabschnitt ein und finden Sie riskante Gebiete auf Ihrem Weg"}),Object(j.jsx)(y,{updateJourneyDetails:function(){L.set({from:n,to:h,routemode:"oev",controls:"all"}),M(!0)},setDepartureLoc:a,setArrivalLoc:p,setDate:w}),Object(j.jsx)("div",{id:"mapcontainer",style:{maxWidth:"100vw",height:"500px",border:"2px inset #ccc",marginTop:"2rem"}}),Object(j.jsx)(N,{content:T,from:n,to:h,date:S})]})};n(26);r.a.render(Object(j.jsx)(G,{}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.4e1fecea.chunk.js.map